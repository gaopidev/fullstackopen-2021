(this.webpackJsonpphoneguide=this.webpackJsonpphoneguide||[]).push([[0],{21:function(e,n,t){},22:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),a=t(16),o=t.n(a),i=(t(21),t(3)),u=(t(22),t(0)),s=function(e){var n=e.filterName;return Object(u.jsxs)("div",{id:"search",children:[Object(u.jsx)("label",{htmlFor:"filter",children:"Filter shown with: "}),Object(u.jsx)("input",{id:"filter",onChange:n})]})},d=function(e){var n=e.newName,t=e.number,c=e.handleName,r=e.handleNumber,a=e.addName;return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{children:[Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"newName",children:"Name: "}),Object(u.jsx)("input",{id:"newName",value:n,onChange:c})]}),Object(u.jsxs)("div",{className:"formGroup",children:[Object(u.jsx)("label",{htmlFor:"number",children:"Number: "}),Object(u.jsx)("input",{id:"number",value:t,onChange:r})]}),Object(u.jsx)("div",{className:"formGroup",children:Object(u.jsx)("button",{className:"primary",type:"submit",onClick:a,children:"Add"})})]})})},l=function(e){var n=e.people,t=e.deletePerson;return Object(u.jsx)("div",{children:n.map((function(e){return Object(u.jsxs)("p",{children:[e.name,": ",Object(u.jsx)("b",{children:e.number}),Object(u.jsx)("button",{className:"danger",type:"button",onClick:function(){return t(e.id,e.name)},children:"Delete"})]},e.id)}))})},j=t(4),b=t.n(j),f="/api/persons",m={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},addPerson:function(e){return b.a.post(f,e).then((function(e){return e.data}))},deletePerson:function(e){return b.a.delete("".concat(f,"/").concat(e)).then((function(e){return e}))},updateNumber:function(e){return b.a.put("".concat(f,"/").concat(e.id),e).then((function(e){return e.data}))}};var h=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),o=Object(i.a)(a,2),j=o[0],b=o[1],f=Object(c.useState)(""),h=Object(i.a)(f,2),O=h[0],p=h[1],x=Object(c.useState)([]),v=Object(i.a)(x,2),N=v[0],w=v[1],g=Object(c.useState)([]),y=Object(i.a)(g,2),C=y[0],P=y[1],k=function(e){var n=e.message,t=e.stat;return Object(u.jsx)("div",{id:"notification",className:t,children:Object(u.jsx)("p",{children:n})})};return Object(c.useEffect)((function(){m.getAll().then((function(e){return r(e)}))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(s,{filterName:function(e){var n=e.target.value,c=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));w(c)}}),C?Object(u.jsx)(k,{message:C[0],stat:C[1]}):"",Object(u.jsx)("h2",{children:"Add a new"}),Object(u.jsx)(d,{addName:function(e){if(e.preventDefault(),-1===t.findIndex((function(e){return e.name===j}))){var n={name:j,number:O};m.addPerson(n).then((function(e){r(t.concat(e)),P(["Added ".concat(j),"success"]),setTimeout((function(){P([])}),5e3)})),b(""),p("")}else{if(window.confirm("".concat(j," is already added to phonebook, replace the old number with a new one?"))){var c=t.find((function(e){return e.name===j}));c.number=O,m.updateNumber(c).then((function(e){t.map((function(n){return n.name!==j?n:e})),P(["Modified ".concat(j),"success"]),setTimeout((function(){P([])}),5e3)})).catch((function(e){console.error(e),r(t.filter((function(e){return e.name!==j}))),P(["Information of ".concat(j," has already been removed from server"),"danger"]),setTimeout((function(){P([])}),5e3)}))}b(""),p("")}},handleName:function(e){b(e.target.value)},handleNumber:function(e){p(e.target.value)},number:O,newName:j}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(l,{people:N,deletePerson:function(e,n){window.confirm("Do you really want to delete ".concat(n))&&m.deletePerson(e).then((function(c){204===c.status&&(r(t.filter((function(n){return n.id!==e}))),P(["Deleted ".concat(n),"success"]),setTimeout((function(){P([])}),5e3),w([]),document.getElementById("filter").value="")}))}})]})};o.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(h,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.8de4acda.chunk.js.map