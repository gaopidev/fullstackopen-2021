{"version":3,"sources":["components/Search.js","components/PersonForm.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["Search","filterName","id","htmlFor","onChange","Form","newName","number","handleName","handleNumber","addName","className","value","type","onClick","Persons","people","deletePerson","map","person","name","baseUrl","exportObject","getAll","axios","get","then","resp","data","addPerson","newPerson","post","res","delete","updateNumber","put","App","useState","setPeople","setNewName","setNumber","filter","setFilter","notify","setNotify","Notification","message","stat","useEffect","requestService","e","inp","target","toLowerCase","includes","PersonForm","preventDefault","findIndex","returnedPerson","concat","setTimeout","catch","error","console","response","window","confirm","save","find","status","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.a686efcb.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Search = ({ filterName }) => {\n  return (\n    <div id=\"search\">\n      <label htmlFor=\"filter\">Filter shown with: </label>\n      <input id=\"filter\" onChange={filterName} />\n    </div>\n  );\n};\n\nexport default Search;\n","import React from \"react\";\n\nconst Form = ({ newName, number, handleName, handleNumber, addName }) => {\n   return (\n      <div>\n         <form>\n            <div className=\"formGroup\">\n               <label htmlFor=\"newName\">Name: </label>\n               <input id=\"newName\" value={newName} onChange={handleName} />\n            </div>\n            <div className=\"formGroup\">\n               <label htmlFor=\"number\">Number: </label>\n               <input id=\"number\" value={number} onChange={handleNumber} />\n            </div>\n            <div className=\"formGroup\">\n               <button className=\"primary\" type=\"submit\" onClick={addName}>\n                  Add\n               </button>\n            </div>\n         </form>\n      </div>\n   );\n};\n\nexport default Form;\n","import React from \"react\";\n\nconst Persons = ({ people, deletePerson }) => {\n   return (\n      <div>\n         {people.map((person) => (\n            <p key={person.id}>\n               {person.name}: <b>{person.number}</b>\n               <button\n                  className=\"danger\"\n                  type=\"button\"\n                  onClick={() => deletePerson(person.id, person.name)}\n               >\n                  Delete\n               </button>\n            </p>\n         ))}\n      </div>\n   );\n};\n\nexport default Persons;\n","import axios from \"axios\";\n\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((resp) => resp.data);\n};\n\nconst addPerson = (newPerson) => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then((res) => res.data);\n};\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((resp) => resp);\n};\n\nconst updateNumber = (person) => {\n  const request = axios.put(`${baseUrl}/${person.id}`, person);\n  return request.then((resp) => resp.data);\n};\n\nconst exportObject = {\n  getAll,\n  addPerson,\n  deletePerson,\n  updateNumber,\n};\nexport default exportObject;\n","import { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Search from \"./components/Search\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport requestService from \"./services/persons\";\n\nfunction App() {\n  const [people, setPeople] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [number, setNumber] = useState(\"\");\n  const [filter, setFilter] = useState([]);\n  const [notify, setNotify] = useState([]);\n\n  const Notification = ({ message, stat }) => {\n    // result: success or failed\n    return (\n      <div id=\"notification\" className={stat}>\n        <p>{message}</p>\n      </div>\n    );\n  };\n\n  useEffect(() => {\n    requestService.getAll().then((people) => setPeople(people));\n  }, []);\n\n  const addName = (e) => {\n    e.preventDefault();\n    if (people.findIndex((person) => person.name === newName) === -1) {\n      const newPerson = { name: newName, number };\n      requestService\n        .addPerson(newPerson)\n        .then((returnedPerson) => {\n          setPeople(people.concat(returnedPerson));\n          setNotify([`Added ${newName}`, \"success\"]);\n          setTimeout(() => {\n            setNotify([]);\n          }, 5000);\n        })\n        .catch((error) => {\n          console.error([\"FRONTEND\", error.response, error.response.data]);\n          setNotify([error.response.data.error, \"danger\"]);\n          setTimeout(() => {\n            setNotify([]);\n          }, 5000);\n        });\n      setNewName(\"\");\n      setNumber(\"\");\n    } else {\n      if (\n        window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        let save = people.find((person) => person.name === newName);\n        save.number = number;\n        requestService\n          .updateNumber(save)\n          .then((resp) => {\n            people.map((person) => (person.name !== newName ? person : resp));\n            setNotify([`Modified ${newName}`, \"success\"]);\n            setTimeout(() => {\n              setNotify([]);\n            }, 5000);\n          })\n          .catch((error) => {\n            console.error(error);\n            setPeople(people.filter((person) => person.name !== newName));\n            setNotify([\n              `Information of ${newName} has already been removed from server`,\n              \"danger\",\n            ]);\n            setTimeout(() => {\n              setNotify([]);\n            }, 5000);\n          });\n      }\n      setNewName(\"\");\n      setNumber(\"\");\n    }\n  };\n  const deletePerson = (id, name) => {\n    if (window.confirm(`Do you really want to delete ${name}`)) {\n      requestService.deletePerson(id).then((response) => {\n        if (response.status === 204) {\n          setPeople(people.filter((person) => person.id !== id));\n          setNotify([`Deleted ${name}`, \"success\"]);\n          setTimeout(() => {\n            setNotify([]);\n          }, 5000);\n          setFilter([]);\n          document.getElementById(\"filter\").value = \"\";\n        }\n      });\n    }\n  };\n\n  const handleName = (e) => {\n    setNewName(e.target.value);\n  };\n  const handleNumber = (e) => {\n    setNumber(e.target.value);\n  };\n  const filterName = (e) => {\n    let inp = e.target.value;\n    const res = people.filter((person) => {\n      return person.name.toLowerCase().includes(inp.toLowerCase());\n    });\n    setFilter(res);\n  };\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Search filterName={filterName} />\n      {notify ? <Notification message={notify[0]} stat={notify[1]} /> : \"\"}\n      <h2>Add a new</h2>\n      <PersonForm\n        addName={addName}\n        handleName={handleName}\n        handleNumber={handleNumber}\n        number={number}\n        newName={newName}\n      />\n      <h2>Numbers</h2>\n      <Persons people={filter} deletePerson={deletePerson} />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}